<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>木桶布局</title>
    <meta http-equiv="x-ua-compatible" content="IE=edge,chrome=1">
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
    <style>
        *{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        header{
            padding: 50px 0;
            text-align: center;
        }
        header input{
            width: 250px;
            padding: 5px;
            outline: none;
        }
        main{
            margin: 10px;
        }
        main::after{
            content: '';
            display: block;
            clear: both;
        }
        main>figure{
            float: left;
            padding: 5px;
        }
        main>figure img{
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
        <header>
            <input type="text" id="search-ipt"placeholder="请输入关键字检索">
        </header>
        <main>
            <figure>
                <img src="" alt="">
            </figure>
        </main>
        <script>
            var mainNode =document.querySelector('main')
            var baseHight =200
            var rowTotalWidth = 0
            getData('pig')
                .then(render)
                .catch(function (err) {
                    console.log(err)
                })
            function render(data) {
                data.hits.forEach(function (imgInfo) {
                    console.log(imgInfo)
                    imgInfo.newHight = baseHight
                    imgInfo.newWidth =imgInfo.webformatWight/imgInfo.webformatHeight*newHight

                })

            }
           function getData(keyword){
               return new  Promise(function (resolve,reject) {
                   var data = {
                       key: '9081329-ae9a8758b9e118192c229f289',
                       q: keyword,
                       image_type: 'photo',
                       per_page: 20
                   }
                   var url = 'https://pixabay.com/api/?'
                   for (var key in data) {
                       url += key + '=' + data[key] + '&'
                   }
                   console.log(url)
                   var xhr = new XMLHttpRequest()
                   xhr.open('get', url, true)
                   xhr.send()
                   xhr.onload = function () {
                       var json = JSON.parse(this.response)
                       console.log(json)
                       resolve(json)

                   }
                   xhr.onerror =function () {
                       reject('ajax error')
                   }
               })
           }





        </script>
</body>
</html>